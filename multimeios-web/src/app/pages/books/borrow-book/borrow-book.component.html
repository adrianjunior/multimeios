<mat-drawer-container class="drawer-container">
  <mat-drawer position="end" #drawer mode="over" class="drawer">
    <div fxLayout="column" fxLayoutAlign="center center" fxLayoutGap="15px">
      <mat-card-title class="title">Aluguel do Livro</mat-card-title>
      <mat-horizontal-stepper [linear]="true" #stepper>
        <mat-step [stepControl]="firstFormGroup" fxLayout>
          <form [formGroup]="firstFormGroup" (onSubmit)="getUserByEmail(form.value)" class="form" fxLayout="column" fxLayoutAlign="start center" fxLayoutGap="20px" fxFlexAlign="center">
            <ng-template matStepLabel>Inserir o Usuário</ng-template>
            <p><b>Digite o email do Usuário que deseja alugar o livro.</b></p>
            <mat-form-field class="w-90">
              <input matInput placeholder="E-mail do usuário" formControlName="userEmail" required>
            </mat-form-field>
            <div fxLayout="column" fxLayoutGap="10px" class="w-90">
              <div fxLayout fxLayoutGap="20px" class="w-100">
                <button mat-raised-button class="step-button" color="warn" (click)="closeSidenav()">Cancelar</button>
                <button mat-raised-button class="step-button" color="primary" [disabled]="firstFormGroup.invalid" type="submit">Confirmar</button>
              </div>
              <button mat-button class="w-100" color="primary">Usuário não cadastrado? Cadastre-o clicando aqui</button>
            </div>
          </form>
        </mat-step>
        <mat-step>
          <div fxLayout="column">
              <ng-template matStepLabel>Confirmar o Aluguel</ng-template>
              <p>Confira os dados do aluguel e, caso esteja tudo correto, clique em confirmar.</p>
              <div fxLayout="column">
                <p>Livro: <span>{{book.title}}</span></p>
                <p>Autor: <span>{{book.author}}</span></p>
                <p>Usuário: <span>{{book.title}}</span></p>
              </div> 
              <div fxLayout>
                <button mat-raised-button color="warn" (click)="closeSidenav()">Cancelar</button>
                <button mat-raised-button color="primary" matStepperNext>Confirmar</button>
              </div>
          </div>
        </mat-step>
      </mat-horizontal-stepper>
    </div>    
  </mat-drawer>
  <div class="title-bar" fxLayout fxLayoutAlign="center center">
    <h1 class="title">Alugar Livro</h1>
  </div>
  <div class="container mat-elevation-z4">
    <div class="header mat-elevation-z2">
      <mat-form-field>
        <input matInput (keyup)="applyFilter($event.target.value)" placeholder="Pesquisar">
      </mat-form-field>
    </div>
    <mat-table #table [dataSource]="dataSource" matSort>

      <ng-container matColumnDef="title">
        <mat-header-cell *matHeaderCellDef mat-sort-header> Título </mat-header-cell>
        <mat-cell *matCellDef="let book"> {{book.title}} </mat-cell>
      </ng-container>

      <ng-container matColumnDef="author">
        <mat-header-cell *matHeaderCellDef mat-sort-header> Autor </mat-header-cell>
        <mat-cell *matCellDef="let book"> {{book.author}} </mat-cell>
      </ng-container>

      <ng-container matColumnDef="gender">
        <mat-header-cell *matHeaderCellDef mat-sort-header> Categoria </mat-header-cell>
        <mat-cell *matCellDef="let book"> {{book.category}} </mat-cell>
      </ng-container>

      <ng-container matColumnDef="available">
        <mat-header-cell *matHeaderCellDef mat-sort-header> Disponíveis </mat-header-cell>
        <mat-cell *matCellDef="let book"> {{book.available | number}} </mat-cell>
      </ng-container>

      <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
      <mat-row *matRowDef="let book; columns: displayedColumns;" matRipple [matRippleColor]="ripple" class="row" (click)="openSidenav(book)">
      </mat-row>
    </mat-table>

    <mat-paginator #paginator [pageSize]="7" [showFirstLastButtons]="true">
    </mat-paginator>
  </div>
</mat-drawer-container>